<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PPS-Client: /Users/ray/Dropbox/Git_Repo/PPS-Client/client/pps-serial.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PPS-Client
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   <div id="projectbrief">Client for synchronizing the system clock to a GPS PPS source</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_82fe4c214640074ea6cca8a458545cd0.html">PPS-Client</a></li><li class="navelem"><a class="el" href="../../dir_0abebd7044b8a5eba35feef0dba1b6d8.html">client</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pps-serial.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="../../df/d28/pps-serial_8cpp.html" title="The pps-serial.cpp file contains functions and structures for accessing time updates via the serial p...">pps-serial.cpp</a> file contains functions and structures for accessing time updates via the serial port.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d4/d6a/pps-client_8h_source.html">../client/pps-client.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pps-serial.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/dc1/pps-serial_8cpp__incl.svg" width="162" height="136"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="../../df/d28/pps-serial_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><b>serialLocalVars</b></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a65b307997cb2a5f37beac28147690f1c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d28/pps-serial_8cpp.html#a65b307997cb2a5f37beac28147690f1c">getUTCfromGPSmessages</a> (const char *msgbuf, <a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *tcp, time_t *gmtSeconds)</td></tr>
<tr class="separator:a65b307997cb2a5f37beac28147690f1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad914c0cc98dcf40ed1f95659587b32bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d28/pps-serial_8cpp.html#ad914c0cc98dcf40ed1f95659587b32bd">waitForGPSmessages</a> (char *msgbuf, <a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *tcp, struct timeval *t_gmt, time_t *gmtSeconds)</td></tr>
<tr class="separator:ad914c0cc98dcf40ed1f95659587b32bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a324d5d885de29179bbfaad91cd8f5a41"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d28/pps-serial_8cpp.html#a324d5d885de29179bbfaad91cd8f5a41">getTimeOffsetOverSerial</a> (int *timeDif, <a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *tcp)</td></tr>
<tr class="separator:a324d5d885de29179bbfaad91cd8f5a41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5037c30435c669774c0fc2bf2dae04fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d28/pps-serial_8cpp.html#a5037c30435c669774c0fc2bf2dae04fe">doSerialTimeCheck</a> (<a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *tcp)</td></tr>
<tr class="separator:a5037c30435c669774c0fc2bf2dae04fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b59dcade2c7323b79780215baae4fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d28/pps-serial_8cpp.html#a90b59dcade2c7323b79780215baae4fd">makeSerialTimeQuery</a> (<a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *tcp)</td></tr>
<tr class="separator:a90b59dcade2c7323b79780215baae4fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10bb47e214849a31ac6c87556bed416"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d28/pps-serial_8cpp.html#ab10bb47e214849a31ac6c87556bed416">allocInitializeSerialThread</a> (<a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *tcp)</td></tr>
<tr class="separator:ab10bb47e214849a31ac6c87556bed416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f4271a6bb9ed778df76908d570a0660"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d28/pps-serial_8cpp.html#a5f4271a6bb9ed778df76908d570a0660">freeSerialThread</a> (<a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *tcp)</td></tr>
<tr class="separator:a5f4271a6bb9ed778df76908d570a0660"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6fc43fe650a73ed6e4567288c6e1c6bd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dc/d1d/struct_g.html">G</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d28/pps-serial_8cpp.html#a6fc43fe650a73ed6e4567288c6e1c6bd">g</a></td></tr>
<tr class="memdesc:a6fc43fe650a73ed6e4567288c6e1c6bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declares the global variables defined in <a class="el" href="../../d4/d6a/pps-client_8h.html" title="The pps-client.h file contains includes, defines and structures for PPS-Client. ">pps-client.h</a>.  <a href="#a6fc43fe650a73ed6e4567288c6e1c6bd">More...</a><br /></td></tr>
<tr class="separator:a6fc43fe650a73ed6e4567288c6e1c6bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="../../df/d28/pps-serial_8cpp.html" title="The pps-serial.cpp file contains functions and structures for accessing time updates via the serial p...">pps-serial.cpp</a> file contains functions and structures for accessing time updates via the serial port. </p>
<p>Copyright (C) 2016-2018 Raymond S. Connell</p>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA. </p>

<p class="definition">Definition in file <a class="el" href="../../df/d28/pps-serial_8cpp_source.html">pps-serial.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ab10bb47e214849a31ac6c87556bed416"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab10bb47e214849a31ac6c87556bed416">&#9670;&nbsp;</a></span>allocInitializeSerialThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int allocInitializeSerialThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *&#160;</td>
          <td class="paramname"><em>tcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates memory and initializes a thread that will be used by makeSerialimeQuery() to query the serial port. Thread must be released and memory deleted by calling <a class="el" href="../../df/d28/pps-serial_8cpp.html#a5f4271a6bb9ed778df76908d570a0660">freeSerialThread()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">tcp</td><td>Struct pointer for passing data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success or -1 on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00423">423</a> of file <a class="el" href="../../df/d28/pps-serial_8cpp_source.html">pps-serial.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_ab10bb47e214849a31ac6c87556bed416_icgraph.svg" width="324" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5037c30435c669774c0fc2bf2dae04fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5037c30435c669774c0fc2bf2dae04fe">&#9670;&nbsp;</a></span>doSerialTimeCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void doSerialTimeCheck </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *&#160;</td>
          <td class="paramname"><em>tcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests the time difference between system and GPS from <a class="el" href="../../df/d28/pps-serial_8cpp.html#a324d5d885de29179bbfaad91cd8f5a41">getTimeOffsetOverSerial()</a>.</p>
<p>If the time difference is zero, returns the zero result in tcp-&gt;serverTimeDiff[0] and ends the request.</p>
<p>Otherwise a second request is made to verify the first non-zero result. If the two results are identical then the time difference is returned in tcp-&gt;serverTimeDiff[0]. If not, zero is returned and an error message is written to pps-client.log.</p>
<p>If a system error occurs while reading the serial port, zero is returned in tcp-&gt;serverTimeDiff[0] and an error message is written to pps-client.log.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tcp</td><td>A struct pointer used to pass thread data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00279">279</a> of file <a class="el" href="../../df/d28/pps-serial_8cpp_source.html">pps-serial.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_a5037c30435c669774c0fc2bf2dae04fe_cgraph.svg" width="363" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5f4271a6bb9ed778df76908d570a0660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f4271a6bb9ed778df76908d570a0660">&#9670;&nbsp;</a></span>freeSerialThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freeSerialThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *&#160;</td>
          <td class="paramname"><em>tcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases thread and deletes memory used by <a class="el" href="../../df/d28/pps-serial_8cpp.html#a90b59dcade2c7323b79780215baae4fd">makeSerialTimeQuery()</a>;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tcp</td><td>The struct pointer that was used for passing data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00473">473</a> of file <a class="el" href="../../df/d28/pps-serial_8cpp_source.html">pps-serial.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_a5f4271a6bb9ed778df76908d570a0660_icgraph.svg" width="271" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a324d5d885de29179bbfaad91cd8f5a41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a324d5d885de29179bbfaad91cd8f5a41">&#9670;&nbsp;</a></span>getTimeOffsetOverSerial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getTimeOffsetOverSerial </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>timeDif</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *&#160;</td>
          <td class="paramname"><em>tcp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the UTC time from the $GPRMC message of a connected GPS receiver through the serial port, converts the time to local time and compares it with local time read from the system clock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">timeDif</td><td>Time difference in seconds from the system time to the GPS time.</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tcp</td><td>A struct pointer used to pass thread data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if a time difference was generated, 0 if not or -1 on a system error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00226">226</a> of file <a class="el" href="../../df/d28/pps-serial_8cpp_source.html">pps-serial.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_a324d5d885de29179bbfaad91cd8f5a41_cgraph.svg" width="543" height="138"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_a324d5d885de29179bbfaad91cd8f5a41_icgraph.svg" width="363" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a65b307997cb2a5f37beac28147690f1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b307997cb2a5f37beac28147690f1c">&#9670;&nbsp;</a></span>getUTCfromGPSmessages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool getUTCfromGPSmessages </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msgbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *&#160;</td>
          <td class="paramname"><em>tcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&#160;</td>
          <td class="paramname"><em>gmtSeconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes a block of GPS messages to find a GPRMC message and extract the UTC time in seconds.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">msgbuf</td><td>The block of GPS messages to process.</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tcp</td><td>A struct pointer used to pass thread data.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">gmtSeconds</td><td>The UTC time in seconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a complete GPRMC message is found and the time was extracted. Else false. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00058">58</a> of file <a class="el" href="../../df/d28/pps-serial_8cpp_source.html">pps-serial.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_a65b307997cb2a5f37beac28147690f1c_icgraph.svg" width="410" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a90b59dcade2c7323b79780215baae4fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90b59dcade2c7323b79780215baae4fd">&#9670;&nbsp;</a></span>makeSerialTimeQuery()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int makeSerialTimeQuery </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *&#160;</td>
          <td class="paramname"><em>tcp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the time from a serial port connected to a GPS receiver or equivalent and returns the difference in seconds from the local time to the true GPS time.</p>
<p>If a difference is detected, the error is verified by looking for a second identical time difference. If the time difference repeats, the result is valid and is returned in g.serialTimeError. Otherwise the first difference was an error and g.serialTimeError returns 0.</p>
<dl class="section return"><dt>Returns</dt><dd>0 or -1 on a system error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00365">365</a> of file <a class="el" href="../../df/d28/pps-serial_8cpp_source.html">pps-serial.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_a90b59dcade2c7323b79780215baae4fd_cgraph.svg" width="331" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_a90b59dcade2c7323b79780215baae4fd_icgraph.svg" width="304" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad914c0cc98dcf40ed1f95659587b32bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad914c0cc98dcf40ed1f95659587b32bd">&#9670;&nbsp;</a></span>waitForGPSmessages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int waitForGPSmessages </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>msgbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d78/structtime_check_params.html">timeCheckParams</a> *&#160;</td>
          <td class="paramname"><em>tcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>t_gmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&#160;</td>
          <td class="paramname"><em>gmtSeconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Waits for the serial port to buffer enough messages that a GPRMC can usually be found among those. Because the message stream is collected at a relatively slow 9600 baud some steams will take too long to be fully read and processed within one second. For that reason messages are read for only about 250 ms. This insures the messages that are read occur in the second for which the time is required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">msgbuf</td><td>The buffer to read the GPS messages.</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tcp</td><td>A struct pointer used to pass thread data.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">t_gmt</td><td>The time when the serial port starts buffering messages.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">gmtSeconds</td><td>The time in UTC seconds on the local clock when the serial port starts buffering messages.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 if no GPS messages or -1 on a system error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../df/d28/pps-serial_8cpp_source.html#l00144">144</a> of file <a class="el" href="../../df/d28/pps-serial_8cpp_source.html">pps-serial.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_ad914c0cc98dcf40ed1f95659587b32bd_cgraph.svg" width="299" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/d28/pps-serial_8cpp_ad914c0cc98dcf40ed1f95659587b32bd_icgraph.svg" width="380" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6fc43fe650a73ed6e4567288c6e1c6bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fc43fe650a73ed6e4567288c6e1c6bd">&#9670;&nbsp;</a></span>g</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d1d/struct_g.html">G</a> g</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declares the global variables defined in <a class="el" href="../../d4/d6a/pps-client_8h.html" title="The pps-client.h file contains includes, defines and structures for PPS-Client. ">pps-client.h</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00053">53</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 3 2018 15:00:40 for PPS-Client by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
