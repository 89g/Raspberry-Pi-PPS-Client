<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PPS-Client: /Users/ray/Dropbox/Git_Repo/PPS-Client/client/pps-client.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PPS-Client
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   <div id="projectbrief">Client for synchronizing the system clock to a GPS PPS source</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_82fe4c214640074ea6cca8a458545cd0.html">PPS-Client</a></li><li class="navelem"><a class="el" href="../../dir_0abebd7044b8a5eba35feef0dba1b6d8.html">client</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pps-client.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="../../d5/d60/pps-client_8cpp.html" title="The pps-client.cpp file contains the principal PPS-Client controller functions and structures...">pps-client.cpp</a> file contains the principal PPS-Client controller functions and structures.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../d4/d6a/pps-client_8h_source.html">../client/pps-client.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pps-client.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d6/d17/pps-client_8cpp__incl.svg" width="162" height="136"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="../../d5/d60/pps-client_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4efd2ecedb34b38cd1000d86ba5f6ef9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex</a> (struct timex *timex)</td></tr>
<tr class="separator:a4efd2ecedb34b38cd1000d86ba5f6ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fb630b24d9e82f7bc81139e72ff681f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a7fb630b24d9e82f7bc81139e72ff681f">setDelayTrackers</a> (void)</td></tr>
<tr class="separator:a7fb630b24d9e82f7bc81139e72ff681f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0bab7cf61e38b79d3bade19c957735a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ae0bab7cf61e38b79d3bade19c957735a">initialize</a> (bool verbose)</td></tr>
<tr class="separator:ae0bab7cf61e38b79d3bade19c957735a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d47fa254fa62368be4b75c2d5a5889"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ad4d47fa254fa62368be4b75c2d5a5889">getAcquireState</a> (void)</td></tr>
<tr class="separator:ad4d47fa254fa62368be4b75c2d5a5889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab553045428f9337e754db13f1d0ea647"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ab553045428f9337e754db13f1d0ea647">setHardLimit</a> (double avgCorrection)</td></tr>
<tr class="separator:ab553045428f9337e754db13f1d0ea647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b30b41495a6426b5bb557ced936901b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a0b30b41495a6426b5bb557ced936901b">detectDelaySpike</a> (int rawError)</td></tr>
<tr class="separator:a0b30b41495a6426b5bb557ced936901b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9173ef2f7e0585cc0edbc7e5a733bc3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a9173ef2f7e0585cc0edbc7e5a733bc3b">getTimeSlew</a> (int rawError)</td></tr>
<tr class="separator:a9173ef2f7e0585cc0edbc7e5a733bc3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5443ab59528135706e70991cf1f880d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a5443ab59528135706e70991cf1f880d2">clampJitter</a> (int rawError)</td></tr>
<tr class="separator:a5443ab59528135706e70991cf1f880d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec269fd5b44aeaa993781dddc42a2b59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#aec269fd5b44aeaa993781dddc42a2b59">makeAverageIntegral</a> (double avgCorrection)</td></tr>
<tr class="separator:aec269fd5b44aeaa993781dddc42a2b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a7a8a06f0119359f624d891dbcfa08f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a2a7a8a06f0119359f624d891dbcfa08f">integralIsReady</a> (void)</td></tr>
<tr class="separator:a2a7a8a06f0119359f624d891dbcfa08f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a062748b2a1af5a7bb4e0efd94b84f8d1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a062748b2a1af5a7bb4e0efd94b84f8d1">getAverageCorrection</a> (int timeCorrection)</td></tr>
<tr class="separator:a062748b2a1af5a7bb4e0efd94b84f8d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc6dfb03768da2fee5b559921e132d4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#afc6dfb03768da2fee5b559921e132d4c">setClockToNTPtime</a> (int pps_fd)</td></tr>
<tr class="separator:afc6dfb03768da2fee5b559921e132d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8a57ca976fdc693971281394846cd7e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#aa8a57ca976fdc693971281394846cd7e">setClockToSerialTime</a> (int pps_fd)</td></tr>
<tr class="separator:aa8a57ca976fdc693971281394846cd7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6039744741cd25f2ba1a2e3fa253e766"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a6039744741cd25f2ba1a2e3fa253e766">setClockFractionalSecond</a> (int correction, int pps_fd)</td></tr>
<tr class="separator:a6039744741cd25f2ba1a2e3fa253e766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad889ebd8ff46d7aece2aa6c4c7252ed2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ad889ebd8ff46d7aece2aa6c4c7252ed2">buildRawErrorDistrib</a> (int rawError, double errorDistrib[], unsigned int *count)</td></tr>
<tr class="separator:ad889ebd8ff46d7aece2aa6c4c7252ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad71923ccec11a6d6e132c43e60fe8765"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ad71923ccec11a6d6e132c43e60fe8765">removeNoise</a> (int rawError)</td></tr>
<tr class="separator:ad71923ccec11a6d6e132c43e60fe8765"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8696238d80e8a7a4ae44de6de50ab1ce"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a8696238d80e8a7a4ae44de6de50ab1ce">getIntegral</a> (void)</td></tr>
<tr class="separator:a8696238d80e8a7a4ae44de6de50ab1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c229e1f60e3e90ca0a1c6e91841a10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a86c229e1f60e3e90ca0a1c6e91841a10">getPPStime</a> (timeval t, int timeCorrection)</td></tr>
<tr class="separator:a86c229e1f60e3e90ca0a1c6e91841a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75f33c602a27dd5150efbe4b4389e2da"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a75f33c602a27dd5150efbe4b4389e2da">getFractionalSeconds</a> (timeval pps_t)</td></tr>
<tr class="separator:a75f33c602a27dd5150efbe4b4389e2da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab289e4eac214ae5bc8348bbd280f7512"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ab289e4eac214ae5bc8348bbd280f7512">increaseMonotonicCount</a> (void)</td></tr>
<tr class="separator:ab289e4eac214ae5bc8348bbd280f7512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d1a8140877cdce22afc81a45b3189e9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a2d1a8140877cdce22afc81a45b3189e9">isNearZero</a> (double val)</td></tr>
<tr class="separator:a2d1a8140877cdce22afc81a45b3189e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7cdb2055110f6bd75ad5d00c03f3fc5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#ae7cdb2055110f6bd75ad5d00c03f3fc5">detectExteralSystemClockChange</a> (void)</td></tr>
<tr class="separator:ae7cdb2055110f6bd75ad5d00c03f3fc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1106ba0d807ae268b8713acba3808e07"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a1106ba0d807ae268b8713acba3808e07">makeTimeCorrection</a> (struct timeval pps_t, int pps_fd)</td></tr>
<tr class="separator:a1106ba0d807ae268b8713acba3808e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a510df19cb6ad4f22a7823cbc0852b9e9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a510df19cb6ad4f22a7823cbc0852b9e9">checkPPSInterrupt</a> (int pps_fd)</td></tr>
<tr class="separator:a510df19cb6ad4f22a7823cbc0852b9e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6128ff37a7e46aee507240712c6c8f74"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a6128ff37a7e46aee507240712c6c8f74">detectIntrptDelaySpike</a> (int intrptError)</td></tr>
<tr class="separator:a6128ff37a7e46aee507240712c6c8f74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfab868ee3b041247625234432820321"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#abfab868ee3b041247625234432820321">removeIntrptNoise</a> (int intrptError)</td></tr>
<tr class="separator:abfab868ee3b041247625234432820321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a505a6be9b7669b349cea03a9fe663d74"><td class="memItemLeft" align="right" valign="top">struct timespec&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a505a6be9b7669b349cea03a9fe663d74">setSyncDelay</a> (int timeAt, int fracSec)</td></tr>
<tr class="separator:a505a6be9b7669b349cea03a9fe663d74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaed9f7309f80d45af2c4aecf5eff8e41"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#aaed9f7309f80d45af2c4aecf5eff8e41">getInterruptDelay</a> (int pps_fd)</td></tr>
<tr class="separator:aaed9f7309f80d45af2c4aecf5eff8e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86496ba51a12c38a52f57267412a096a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a86496ba51a12c38a52f57267412a096a">readPPS_SetTime</a> (bool verbose, int pps_fd)</td></tr>
<tr class="separator:a86496ba51a12c38a52f57267412a096a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3bdab744bd7ed860326323fad180f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a4b3bdab744bd7ed860326323fad180f2">waitForPPS</a> (bool verbose, int pps_fd)</td></tr>
<tr class="separator:a4b3bdab744bd7ed860326323fad180f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa31f487a99743d24af9076a3e11e5425"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#aa31f487a99743d24af9076a3e11e5425">version</a> = &quot;1.4.0&quot;</td></tr>
<tr class="memdesc:aa31f487a99743d24af9076a3e11e5425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Program version 1.4.0 created on 17 Dec 2017.  <a href="#aa31f487a99743d24af9076a3e11e5425">More...</a><br /></td></tr>
<tr class="separator:aa31f487a99743d24af9076a3e11e5425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fc43fe650a73ed6e4567288c6e1c6bd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dc/d1d/struct_g.html">G</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d60/pps-client_8cpp.html#a6fc43fe650a73ed6e4567288c6e1c6bd">g</a></td></tr>
<tr class="memdesc:a6fc43fe650a73ed6e4567288c6e1c6bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declares the global variables defined in <a class="el" href="../../d4/d6a/pps-client_8h.html" title="The pps-client.h file contains includes, defines and structures for PPS-Client. ">pps-client.h</a>.  <a href="#a6fc43fe650a73ed6e4567288c6e1c6bd">More...</a><br /></td></tr>
<tr class="separator:a6fc43fe650a73ed6e4567288c6e1c6bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="../../d5/d60/pps-client_8cpp.html" title="The pps-client.cpp file contains the principal PPS-Client controller functions and structures...">pps-client.cpp</a> file contains the principal PPS-Client controller functions and structures. </p>
<p>The PPS-Client daemon synchronizes the system clock to a Pulse-Per-Second (PPS) source to a resolution of one microsecond with an absolute accuracy of a few microseconds. To obtain this level of performance PPS-Client provides offset corrections every second and frequency corrections every minute. This and removal of jitter in the reported PPS time keeps the system clock continuously synchronized to the PPS source.</p>
<p>A wired GPIO connection is required from a PPS source. Synchronization is provided by the rising edge of that PPS source which is connected to GPIO 4.</p>
<p>The executable for this daemon is "/usr/sbin/pps-client"</p>
<p>The daemon script is "/etc/init.d/pps-client"</p>
<p>The configuration file is "/etc/pps-client.conf"</p>
<p>The kernel driver is "/lib/modules/`uname -r`/kernel/drivers/misc/gps-pps-io.ko"</p>
<p>Created on: Nov 17, 2015</p>
<p>Copyright (C) 2016-2018 Raymond S. Connell</p>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA. </p>

<p class="definition">Definition in file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4efd2ecedb34b38cd1000d86ba5f6ef9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4efd2ecedb34b38cd1000d86ba5f6ef9">&#9670;&nbsp;</a></span>adjtimex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adjtimex </td>
          <td>(</td>
          <td class="paramtype">struct timex *&#160;</td>
          <td class="paramname"><em>timex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>System call </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a4efd2ecedb34b38cd1000d86ba5f6ef9_icgraph.svg" width="594" height="112"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad889ebd8ff46d7aece2aa6c4c7252ed2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad889ebd8ff46d7aece2aa6c4c7252ed2">&#9670;&nbsp;</a></span>buildRawErrorDistrib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void buildRawErrorDistrib </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>errorDistrib</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs an exponentially decaying distribution of rawError with a half life on individual samples of 1 hour.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The distribution values. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">errorDistrib</td><td>The distribution being constructed. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">[in/out]</td><td>count The count of distribution samples. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00487">487</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ad889ebd8ff46d7aece2aa6c4c7252ed2_icgraph.svg" width="332" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a510df19cb6ad4f22a7823cbc0852b9e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a510df19cb6ad4f22a7823cbc0852b9e9">&#9670;&nbsp;</a></span>checkPPSInterrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int checkPPSInterrupt </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pps_fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Logs loss and resumption of the PPS interrupt and if so configured can set a hardware pin HIGH and LOW respectively. Can force exit if the interrupt is lost for more than one hour when "exit-lost-pps=enable" is set in the config file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_fd</td><td>The gps-pps-io device driver file descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, else -1 on error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00810">810</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a510df19cb6ad4f22a7823cbc0852b9e9_cgraph.svg" width="278" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a510df19cb6ad4f22a7823cbc0852b9e9_icgraph.svg" width="283" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5443ab59528135706e70991cf1f880d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5443ab59528135706e70991cf1f880d2">&#9670;&nbsp;</a></span>clampJitter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int clampJitter </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clamps rawError to an adaptive value determined at the current hardLimit value from the current value of <a class="el" href="../../dc/d1d/struct_g.html#a467f1a5f1b727b3b5c06e5eb13fcf866" title="A one-minute rolling average of G.timeCorrection values generated by getAverageCorrection(). ">G.avgCorrection</a>.</p>
<p>Once the rawError values have been limited to values of +/- 1 microsecond and the control loop has settled, this clamping causes the controller to make the average number of positive and negative rawError values equal rather than making the sum of the positive and negative jitter values zero. This removes the bias that would otherwise be introduced by the rawError values which are largely random and consequently would introduce a constantly changing random offset. The result is also to move the average PPS interrupt delay to its median value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The raw error value to be converted to a zero error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00246">246</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a5443ab59528135706e70991cf1f880d2_icgraph.svg" width="275" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0b30b41495a6426b5bb557ced936901b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b30b41495a6426b5bb557ced936901b">&#9670;&nbsp;</a></span>detectDelaySpike()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool detectDelaySpike </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes jitter delay spikes by returning "true" as long as the jitter value remains beyond a threshold (<a class="el" href="../../dc/d1d/struct_g.html#a6563964d8f28653aab6db85fc47d0db7" title="PPS time delay value beyond which a delay is defined to be a delay spike. ">G.noiseLevel</a>). Is not active unless <a class="el" href="../../dc/d1d/struct_g.html#a1701ef67969fbd2261dcda8ff8e6e50c" title="An adaptive limit value determined by setHardLimit() and applied to G.rawError by clampJitter() as th...">G.hardLimit</a> is at HARD_LIMIT_4 or below.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The raw error vlue to be tested for a delay spike.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>"true" if a delay spike is detected. Else "false". </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00183">183</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a0b30b41495a6426b5bb557ced936901b_icgraph.svg" width="284" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae7cdb2055110f6bd75ad5d00c03f3fc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7cdb2055110f6bd75ad5d00c03f3fc5">&#9670;&nbsp;</a></span>detectExteralSystemClockChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool detectExteralSystemClockChange </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determines whether the system clock has been set externally.</p>
<dl class="section return"><dt>Returns</dt><dd>true if clock was set else false. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00689">689</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ae7cdb2055110f6bd75ad5d00c03f3fc5_cgraph.svg" width="323" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ae7cdb2055110f6bd75ad5d00c03f3fc5_icgraph.svg" width="380" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6128ff37a7e46aee507240712c6c8f74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6128ff37a7e46aee507240712c6c8f74">&#9670;&nbsp;</a></span>detectIntrptDelaySpike()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool detectIntrptDelaySpike </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>intrptError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes jitter delay spikes by returning "true" as long as the jitter level remains above a threshold (<a class="el" href="../../dc/d1d/struct_g.html#a6563964d8f28653aab6db85fc47d0db7" title="PPS time delay value beyond which a delay is defined to be a delay spike. ">G.noiseLevel</a>). Is not active unless <a class="el" href="../../dc/d1d/struct_g.html#a1701ef67969fbd2261dcda8ff8e6e50c" title="An adaptive limit value determined by setHardLimit() and applied to G.rawError by clampJitter() as th...">G.hardLimit</a> is at HARD_LIMIT_4 or below.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">intrptError</td><td>The raw interrupt error value to be tested for a delay spike.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>"true if a delay spike is detected, else
"false". </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00874">874</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a6128ff37a7e46aee507240712c6c8f74_icgraph.svg" width="344" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad4d47fa254fa62368be4b75c2d5a5889"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d47fa254fa62368be4b75c2d5a5889">&#9670;&nbsp;</a></span>getAcquireState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool getAcquireState </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true when the control loop can begin to control the system clock frequency. At program start only the time slew is adjusted because the drift can be too large for it to be practical to adjust the system clock frequency to correct for it. SLEW_MAX sets a reasonable limit below which frequency offset can also be adjusted to correct system time.</p>
<p>Consequently, once the drift is within SLEW_MAX microseconds of zero and the controller has been running for at least 60 seconds (time selected for convenience), this function returns "true" causing the controller to begin to also adjust the system clock frequency offset.</p>
<dl class="section return"><dt>Returns</dt><dd>"true" when the control loop can begin to control the system clock frequency. Else "false". </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00109">109</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ad4d47fa254fa62368be4b75c2d5a5889_icgraph.svg" width="320" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a062748b2a1af5a7bb4e0efd94b84f8d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a062748b2a1af5a7bb4e0efd94b84f8d1">&#9670;&nbsp;</a></span>getAverageCorrection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double getAverageCorrection </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeCorrection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maintains <a class="el" href="../../dc/d1d/struct_g.html#a9e362254ef6b852ecff131b84e6512fe" title="Contains the G.timeCorrection values from over the previous 60 seconds. ">G.correctionFifo</a> which contains second-by-second values of time corrections over the last minute, accumulates a rolling sum of these and returns the average correction over the last minute.</p>
<p>Since timeCorrection converges to a sequence of positive and negative values each of magnitude one, the average timeCorrection which is forced to be zero by the controller also corresponds to the time delay where the number of positive and negative corrections are equal and thus this time delay, although not directly measurable, is the median of the time delays causing the corrections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeCorrection</td><td>The time correction value to be accumulated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The average correction value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00347">347</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a062748b2a1af5a7bb4e0efd94b84f8d1_cgraph.svg" width="327" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a062748b2a1af5a7bb4e0efd94b84f8d1_icgraph.svg" width="355" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a75f33c602a27dd5150efbe4b4389e2da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75f33c602a27dd5150efbe4b4389e2da">&#9670;&nbsp;</a></span>getFractionalSeconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getFractionalSeconds </td>
          <td>(</td>
          <td class="paramtype">timeval&#160;</td>
          <td class="paramname"><em>pps_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the fractional seconds part of interrupt time and if the value should be interpreted as negative then translates the value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_t</td><td>The delayed time of the PPS rising edge returned by the system clock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The fractional seconds part of the time. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00611">611</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a75f33c602a27dd5150efbe4b4389e2da_icgraph.svg" width="354" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8696238d80e8a7a4ae44de6de50ab1ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8696238d80e8a7a4ae44de6de50ab1ce">&#9670;&nbsp;</a></span>getIntegral()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double getIntegral </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>if <a class="el" href="../../dc/d1d/struct_g.html#a1701ef67969fbd2261dcda8ff8e6e50c" title="An adaptive limit value determined by setHardLimit() and applied to G.rawError by clampJitter() as th...">G.hardLimit</a> == HARD_LIMIT_1, gets an integral time correction as a 10 second average of integrals of average time corrections over one minute. Otherwise gets the integral time correction as the single last integral of average time corrections over one minute.</p>
<dl class="section return"><dt>Returns</dt><dd>The integral of time correction values. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00560">560</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a8696238d80e8a7a4ae44de6de50ab1ce_cgraph.svg" width="292" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a8696238d80e8a7a4ae44de6de50ab1ce_icgraph.svg" width="288" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aaed9f7309f80d45af2c4aecf5eff8e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaed9f7309f80d45af2c4aecf5eff8e41">&#9670;&nbsp;</a></span>getInterruptDelay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getInterruptDelay </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pps_fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When CALIBRATE is enabled, calculates the time interval between a write to an I/O pin that generates a hardware interrupt and the recognition of that interrupt by the system.</p>
<p>Both the write time and the recognition time are read from the PPS-Client kernel driver approximately each second. The time interval is then calculated along with its median value. The median value, generated with one-minute weighting, is the approximate interrupt delay and is assigned to <a class="el" href="../../dc/d1d/struct_g.html#a9465af7d57a7fe2b1751d1f2134f3ab3">G.sysDelay</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_fd</td><td>The PPS-Client device driver file descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success else -1 on write error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00977">977</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_aaed9f7309f80d45af2c4aecf5eff8e41_cgraph.svg" width="492" height="236"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_aaed9f7309f80d45af2c4aecf5eff8e41_icgraph.svg" width="275" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a86c229e1f60e3e90ca0a1c6e91841a10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86c229e1f60e3e90ca0a1c6e91841a10">&#9670;&nbsp;</a></span>getPPStime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getPPStime </td>
          <td>(</td>
          <td class="paramtype">timeval&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeCorrection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the time of the PPS rising edge from the timeCorrection value and sets the corresponding timestamp.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">t</td><td>The delayed time of the PPS rising edge returned by the system.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeCorrection</td><td>The correction to be applied to get the back dated time of the PPS rising edge. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00589">589</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a86c229e1f60e3e90ca0a1c6e91841a10_cgraph.svg" width="266" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a86c229e1f60e3e90ca0a1c6e91841a10_icgraph.svg" width="295" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9173ef2f7e0585cc0edbc7e5a733bc3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9173ef2f7e0585cc0edbc7e5a733bc3b">&#9670;&nbsp;</a></span>getTimeSlew()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getTimeSlew </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the average time offset from zero over the interval SLEW_LEN and updates avgSlew with this value every SLEW_LEN seconds.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The raw error to be accumulated to determine average slew. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00215">215</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a9173ef2f7e0585cc0edbc7e5a733bc3b_icgraph.svg" width="256" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab289e4eac214ae5bc8348bbd280f7512"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab289e4eac214ae5bc8348bbd280f7512">&#9670;&nbsp;</a></span>increaseMonotonicCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void increaseMonotonicCount </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advances a monotonic time count g.t_count second by second even when this function is not called every second. The g.t_count value is used to determine if the system time has been set externally in the <a class="el" href="../../d5/d60/pps-client_8cpp.html#ae7cdb2055110f6bd75ad5d00c03f3fc5">detectExteralSystemClockChange()</a> function. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00627">627</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ab289e4eac214ae5bc8348bbd280f7512_cgraph.svg" width="314" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ab289e4eac214ae5bc8348bbd280f7512_icgraph.svg" width="359" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae0bab7cf61e38b79d3bade19c957735a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0bab7cf61e38b79d3bade19c957735a">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets global variables to initial values at startup or restart and sets system clock frequency offset to zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">verbose</td><td>Enables printing of state status params when "true". </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00072">72</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ae0bab7cf61e38b79d3bade19c957735a_icgraph.svg" width="259" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2a7a8a06f0119359f624d891dbcfa08f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a7a8a06f0119359f624d891dbcfa08f">&#9670;&nbsp;</a></span>integralIsReady()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool integralIsReady </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advances the <a class="el" href="../../dc/d1d/struct_g.html#a9e362254ef6b852ecff131b84e6512fe" title="Contains the G.timeCorrection values from over the previous 60 seconds. ">G.correctionFifo</a> index each second and returns "true" when 60 new time correction values have been accumulated in <a class="el" href="../../dc/d1d/struct_g.html#ab1a8929f898438c3b89b0b15a7c74dd6" title="Accumulates G.timeCorrection values from G.correctionFifo in getAverageCorrection() in order to gener...">G.correctionAccum</a>.</p>
<p>When a value of "true" is returned, new average time correction integrals have been generated by <a class="el" href="../../d5/d60/pps-client_8cpp.html#aec269fd5b44aeaa993781dddc42a2b59">makeAverageIntegral()</a> and are ready for use.</p>
<dl class="section return"><dt>Returns</dt><dd>"true" when ready, else "false". </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00312">312</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a2a7a8a06f0119359f624d891dbcfa08f_cgraph.svg" width="298" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a2a7a8a06f0119359f624d891dbcfa08f_icgraph.svg" width="318" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2d1a8140877cdce22afc81a45b3189e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d1a8140877cdce22afc81a45b3189e9">&#9670;&nbsp;</a></span>isNearZero()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isNearZero </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks that arg val has been near zero for about the previous 20 or so values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">val</td><td>The arg to be checked for nearness to zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the magnitude of the average arg value is less than 0.05 else false. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00672">672</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a2d1a8140877cdce22afc81a45b3189e9_icgraph.svg" width="323" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If not already running, creates a detached process that will run as a daemon. Accepts one command line arg: -v that causes the daemon to run in verbose mode which writes a status string and event messages to the console once per second. These messages continue until the console that started the pps-client daemon is closed.</p>
<p>Alternatively, if the daemon is already running, displays a statement to that effect and accepts the following optional command line args:</p>
<p>The -v flag starts the second-by-second display of a status string that will continue until ended by ctrl-c.</p>
<p>The -s flag requests that specified files be saved. If the -s flag is not followed by a file specifier, a list of the files that can be saved is printed. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01279">1279</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph.svg" width="692" height="690"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aec269fd5b44aeaa993781dddc42a2b59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec269fd5b44aeaa993781dddc42a2b59">&#9670;&nbsp;</a></span>makeAverageIntegral()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void makeAverageIntegral </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>avgCorrection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs, at each second over the last 10 seconds in each minute, 10 integrals of the average time correction over the last minute.</p>
<p>These integrals are then averaged to <a class="el" href="../../dc/d1d/struct_g.html#aefaf376deb98a361cb1f69496a0444e6" title="One-minute average of the integrals in G.integral[]. ">G.avgIntegral</a> just before the minute rolls over. The use of this average of the last 10 integrals to correct the frequency offset of the system clock provides a modest improvement over using only the single last integral.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">avgCorrection</td><td>The average correction to be integrated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00274">274</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_aec269fd5b44aeaa993781dddc42a2b59_icgraph.svg" width="351" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1106ba0d807ae268b8713acba3808e07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1106ba0d807ae268b8713acba3808e07">&#9670;&nbsp;</a></span>makeTimeCorrection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int makeTimeCorrection </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>pps_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pps_fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Makes time corrections each second, frequency corrections each minute and removes jitter from the PPS time reported by pps_t.</p>
<p>This function is called by <a class="el" href="../../d5/d60/pps-client_8cpp.html#a86496ba51a12c38a52f57267412a096a">readPPS_SetTime()</a> from within the one-second delay loop in the <a class="el" href="../../d5/d60/pps-client_8cpp.html#a4b3bdab744bd7ed860326323fad180f2">waitForPPS()</a> function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_t</td><td>The delayed time of the PPS rising edge returned by the system clock.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_fd</td><td>The gps-pps-io device driver file descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success else -1 on system error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00723">723</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a1106ba0d807ae268b8713acba3808e07_cgraph.svg" width="380" height="740"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a1106ba0d807ae268b8713acba3808e07_icgraph.svg" width="335" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a86496ba51a12c38a52f57267412a096a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86496ba51a12c38a52f57267412a096a">&#9670;&nbsp;</a></span>readPPS_SetTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readPPS_SetTime </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pps_fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Requests a read of the reception time of the PPS hardware interrupt by the gps-pps-io driver and passes the value read to <a class="el" href="../../d5/d60/pps-client_8cpp.html#a1106ba0d807ae268b8713acba3808e07">makeTimeCorrection()</a>. The driver is accessed with the pps_fd file descriptor.</p>
<p>When read(pps_fd) is called, the driver puts pps-client to sleep until a PPS hardware interrupt has occurred. When it occurs, the driver wakes up pps-client, read(pps_fd) copies the time at which the interrupt was caught by the driver and the value is passed to <a class="el" href="../../d5/d60/pps-client_8cpp.html#a1106ba0d807ae268b8713acba3808e07">makeTimeCorrection()</a>.</p>
<p>The first time pps-client runs, the time slew can be as large as hundreds of milliseconds. When this is the case, limits imposed by <a class="el" href="../../d5/d60/pps-client_8cpp.html#a4efd2ecedb34b38cd1000d86ba5f6ef9">adjtimex()</a> prevent changes in offset of more than about 500 microseconds each second. As a result, pps-client will make a partial correction each minute and will restart several times before the slew is small enough that <a class="el" href="../../d5/d60/pps-client_8cpp.html#ad4d47fa254fa62368be4b75c2d5a5889">getAcquireState()</a> will set <a class="el" href="../../dc/d1d/struct_g.html#afb1d1c2e765d3b79ea68d085a49e77f1" title="Set &quot;true&quot; by getAcquireState() when the control loop can begin to control the system clock frequency...">G.isControlling</a> to "true". This looping will eventually converge but can take as long as 20 minutes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">verbose</td><td>If "true" then write pps-client state status messages to the console. Else not.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_fd</td><td>The gps-pps-io device driver file descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if no restart is required, 1 if restart is required or -1 on system error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01064">1064</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a86496ba51a12c38a52f57267412a096a_cgraph.svg" width="659" height="339"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a86496ba51a12c38a52f57267412a096a_icgraph.svg" width="282" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="abfab868ee3b041247625234432820321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfab868ee3b041247625234432820321">&#9670;&nbsp;</a></span>removeIntrptNoise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int removeIntrptNoise </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>intrptError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes delay peaks, spikes and jitter from intrptError and returns the resulting clamped zeroError.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">intrptError</td><td>The raw interrupt error value to be processed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting zeroError value after processing. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00906">906</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_abfab868ee3b041247625234432820321_cgraph.svg" width="344" height="135"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_abfab868ee3b041247625234432820321_icgraph.svg" width="312" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad71923ccec11a6d6e132c43e60fe8765"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad71923ccec11a6d6e132c43e60fe8765">&#9670;&nbsp;</a></span>removeNoise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int removeNoise </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rawError</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes spikes and jitter from rawError and returns the resulting clamped zeroError.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rawError</td><td>The raw error value to be processed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting zeroError value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00520">520</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ad71923ccec11a6d6e132c43e60fe8765_cgraph.svg" width="303" height="283"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ad71923ccec11a6d6e132c43e60fe8765_icgraph.svg" width="303" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6039744741cd25f2ba1a2e3fa253e766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6039744741cd25f2ba1a2e3fa253e766">&#9670;&nbsp;</a></span>setClockFractionalSecond()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int setClockFractionalSecond </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>correction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pps_fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Corrects the system time whenever the system clock is set externally.</p>
<p>The external device that sets the clock may inject a non-zero fractional second along with the whole seconds. This is removed by effectively inverting the sign of any detected fractional second and immediately applying it as a clock correction.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">correction</td><td>The fractional correction value in microseconds.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_fd</td><td>The gps-pps-io device driver file descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success or -1 on write error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00460">460</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a6039744741cd25f2ba1a2e3fa253e766_cgraph.svg" width="322" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a6039744741cd25f2ba1a2e3fa253e766_icgraph.svg" width="380" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="afc6dfb03768da2fee5b559921e132d4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc6dfb03768da2fee5b559921e132d4c">&#9670;&nbsp;</a></span>setClockToNTPtime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int setClockToNTPtime </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pps_fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the system time whenever there is an error relative to the whole seconds obtained from Internet SNTP servers by writing the whole second correction to the PPS kernel driver.</p>
<p>Errors are infrequent. But if one occurs the whole seconds of system clock are set following the CHECK_TIME interval to the correct time though the gps-pps-io device driver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_fd</td><td>The gps-pps-io device driver file descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success else -1 on write error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00389">389</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_afc6dfb03768da2fee5b559921e132d4c_cgraph.svg" width="283" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_afc6dfb03768da2fee5b559921e132d4c_icgraph.svg" width="342" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa8a57ca976fdc693971281394846cd7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8a57ca976fdc693971281394846cd7e">&#9670;&nbsp;</a></span>setClockToSerialTime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int setClockToSerialTime </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pps_fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the system time whenever there is an error relative to the whole seconds obtained through the serial port by writing the whole second correction to the PPS kernel driver.</p>
<p>Errors are infrequent. But if one occurs the whole seconds of system clock are set following the CHECK_TIME interval to the correct time though the gps-pps-io device driver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_fd</td><td>The gps-pps-io device driver file descriptor. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00422">422</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_aa8a57ca976fdc693971281394846cd7e_cgraph.svg" width="295" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_aa8a57ca976fdc693971281394846cd7e_icgraph.svg" width="354" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7fb630b24d9e82f7bc81139e72ff681f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fb630b24d9e82f7bc81139e72ff681f">&#9670;&nbsp;</a></span>setDelayTrackers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setDelayTrackers </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets <a class="el" href="../../dc/d1d/struct_g.html#a6563964d8f28653aab6db85fc47d0db7" title="PPS time delay value beyond which a delay is defined to be a delay spike. ">G.noiseLevel</a> to be proportional to <a class="el" href="../../dc/d1d/struct_g.html#a9465af7d57a7fe2b1751d1f2134f3ab3">G.sysDelay</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00058">58</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a7fb630b24d9e82f7bc81139e72ff681f_icgraph.svg" width="455" height="111"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab553045428f9337e754db13f1d0ea647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab553045428f9337e754db13f1d0ea647">&#9670;&nbsp;</a></span>setHardLimit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setHardLimit </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>avgCorrection</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uses <a class="el" href="../../dc/d1d/struct_g.html#a748a236acab00f406a18db3a0c19807a" title="Average slew value determined by getTimeSlew() from the average of G.slewAccum each time G...">G.avgSlew</a> or avgCorrection and the curent hard limit, <a class="el" href="../../dc/d1d/struct_g.html#a1701ef67969fbd2261dcda8ff8e6e50c" title="An adaptive limit value determined by setHardLimit() and applied to G.rawError by clampJitter() as th...">G.hardLimit</a>, to determine the global <a class="el" href="../../dc/d1d/struct_g.html#a1701ef67969fbd2261dcda8ff8e6e50c" title="An adaptive limit value determined by setHardLimit() and applied to G.rawError by clampJitter() as th...">G.hardLimit</a> to set on zero error to convert error values to time corrections.</p>
<p>Because it is much more effective and does not introduce additional time delay, hard limiting is used instead of filtering to remove noise (jitter) from the reported time of PPS capture.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">avgCorrection</td><td>Current average correction value. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00134">134</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_ab553045428f9337e754db13f1d0ea647_icgraph.svg" width="255" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a505a6be9b7669b349cea03a9fe663d74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a505a6be9b7669b349cea03a9fe663d74">&#9670;&nbsp;</a></span>setSyncDelay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timespec setSyncDelay </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeAt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fracSec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets a nanosleep() time delay equal to the time remaining in the second from the time recorded as fracSec plus an adjustment value of timeAt in microseconds. The purpose of the delay is to put the program to sleep until just before the time when a PPS interrupt timing will be delivered by the gps-pps-io device driver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeAt</td><td>The adjustment value.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fracSec</td><td>The fractional second part of the system time.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of time to sleep. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00937">937</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a505a6be9b7669b349cea03a9fe663d74_icgraph.svg" width="328" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4b3bdab744bd7ed860326323fad180f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3bdab744bd7ed860326323fad180f2">&#9670;&nbsp;</a></span>waitForPPS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void waitForPPS </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>verbose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pps_fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Runs the one-second wait loop that waits for the PPS hardware interrupt that returns the timestamp of the interrupt which is passed to <a class="el" href="../../d5/d60/pps-client_8cpp.html#a1106ba0d807ae268b8713acba3808e07">makeTimeCorrection()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">verbose</td><td>If "true" then write pps-client state status messages to the console. Else not.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pps_fd</td><td>The gps-pps-io device driver file descriptor. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l01143">1143</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a4b3bdab744bd7ed860326323fad180f2_cgraph.svg" width="504" height="1026"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d5/d60/pps-client_8cpp_a4b3bdab744bd7ed860326323fad180f2_icgraph.svg" width="200" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6fc43fe650a73ed6e4567288c6e1c6bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fc43fe650a73ed6e4567288c6e1c6bd">&#9670;&nbsp;</a></span>g</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d1d/struct_g.html">G</a> g</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declares the global variables defined in <a class="el" href="../../d4/d6a/pps-client_8h.html" title="The pps-client.h file contains includes, defines and structures for PPS-Client. ">pps-client.h</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00053">53</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

</div>
</div>
<a id="aa31f487a99743d24af9076a3e11e5425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa31f487a99743d24af9076a3e11e5425">&#9670;&nbsp;</a></span>version</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* version = &quot;1.4.0&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Program version 1.4.0 created on 17 Dec 2017. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d60/pps-client_8cpp_source.html#l00051">51</a> of file <a class="el" href="../../d5/d60/pps-client_8cpp_source.html">pps-client.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 3 2018 13:28:56 for PPS-Client by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
